
<div class="container">

  {{!-- 篩選選擇器 --}}
  <div class="row justify-content-center mt-4 mb-5">
    <div class="col-4">

      <form action="/" method="get">
        <select class="form-select border-dark" name="categoryId" onchange="this.form.submit()" aria-label="Default select example">
          <option value="0">所有類別</option>

          {{#each categoryList}}
            <option value="{{ this.id }}">{{ this.name }}</option>
          {{/each}}
        </select>
      </form>

    </div>
  </div>

  {{!-- 總金額統計 --}}
  <div class="row justify-content-center mb-5">
    <div class="col-7 row justify-content-center">

      <div class="text-end col-5 align-self-start ">
        <p class="fs-5">總金額：</p>
      </div>
      <p class="col-7 align-self-end text-primary lh-1" style="font-size: 4rem;">{{ sum }}</p>

    </div>
  </div>

  {{!-- 清單 --}}

  {{#each records}}
  <div class="row mb-1">
      <div class="col-4">
      </div>

      <div class="row col-4 align-items-center me-4 record-list-bg">
        <div class="text-end col-2">
          {{!--icon語法寫在DB中 <i class="fa-solid fa-book fa-2xl text-info"></i> --}}
            {{{ this.icon }}}         
        </div>
        <div class="col-7">
          <div class="fs-4">{{ this.name }}</div>
          <div>{{ this.dateStr }}</div>
        </div>
        <div class="text-end col-3 fs-5">
          {{ this.amount }}
        </div>
      </div>

      <div class="col-3 row align-items-center">
        <button type="button" class="col-3 btn btn-sm btn-info me-1">修改</button>
        <button type="button" class="col-3 btn btn-sm  btn-secondary me-1">刪除</button>
      </div>
  </div>
  {{/each}}


  {{!-- 新增按鈕 --}}
  <div class="row justify-content-center mt-5">

      <button type="button" class="col-2 btn btn-primary me-1">新增一筆支出</button>

  </div>

</div>


<script>

  // 奇偶列作不同樣式變化
  const recordNodeList = [...document.querySelectorAll('div.record-list-bg')]
  recordNodeList.forEach((element, index) => {
    if( index%2 === 0)
      element.classList.add('bg-light');    
  })


  // select-options的預設值須藉由JS程式來預設
  const options = [...document.querySelectorAll('option')];
  const selectedOption = options.find(option => (option.value === '{{ selectedId }}'));

  if (selectedOption !== undefined) {
    selectedOption.selected = true;
  } else {
    options[0].selected = true;
  }
</script>



